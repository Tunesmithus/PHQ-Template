<!doctype html>
<html lang="en" class="h-100">

<head>
    <title>Patient Heatlth Questionaire</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

   <!-- Convert this to an external style sheet -->
   <style>
       main>.container {
           padding: 60px 15px 0;
           margin-bottom: 5rem;
       }
       .sticky-footer {
           position: sticky;
           left: 0;
           bottom: 0;
           width: 100%;
       }
   </style>
</head>

<body class="d-flex flex-column h-100">

    <main class="flex-shrink-0">
       <div class="container">
        <div class="row">
            <div class="col">
                <h1 class="text-primary">Patient Health Questionaire</h1>
            </div>
            <div class="col">
                <button class="btn btn-primary float-end" type="button" data-bs-toggle="collapse" data-bs-target="#assessmentInstructions" >Instructions</button>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <p class="lead"><strong>Over the last 2 weeks, how often have you been bothered by any of the following problems? </strong><em>(Select the answer to the right of each choice.)</em></p>
            </div>
        </div>
           
           
           <div class="row collapse" id="assessmentInstructions">
            <div class="col">
                <hr>
                <h2 class="mb-3 text-center" style="color: black;" >Instructions</h2>
                <h5 style="color: black;">For Initial Diagnosis </h5>
                <ol>
                    <li>Patient Completes PHQ-9 Quick Depression Assessment </li>
                    <li>If there are at least 4 3s in the shaded section (including Questions #1 and #2), consider a depressive
                        disorder. Add score to determine severity</li>
                </ol>
           
                <h5 style="color: black;"  ><em>Consider Major Depressive Disorder</em></h5>
                <p>- if there are at least 5 3s in the shaded section (one of which corresponds to Question #1 or #2)</p>
              
                <h5 style="color: black;" ><em>Consider Other Depressive Disorder</em></h5>
                <p>- if there are at least 5 3s in the shaded section (one of which corresponds to Question #1 or #2)</p>
              
                <p><strong>Note:</strong> Since the questionnaire relies on patient self-report, all responses should be verified by the clinician, and a definitive diagnosis is made on clinical grounds taking into account how well the patient understoodthe questionnaire, as well as other relevant information from the patient. Diagnoses of Major Depressive Disorder or Other Depressive Disorder also require impairment of social, occupational, or other important areas of functioning (Question #10) and ruling out normal bereavement, a history of a Manic Episode (Bipolar Disorder), and a physical disorder, medication, or other drug as the biological cause of the depressive symptoms.</p>
           
                <h5 style="color: black;">To monitor severity over time for newly diagnosed patients or patients in current treatment for
                    depression:</h5>
                    <ol>
                        <li>
                            Patients may complete questionnaires at baseline and at regular intervals (eg, every 2 weeks) at home and bring them in at their next appointment for scoring or they may complete the questionnaire during each scheduled appointment.
                        </li>
                        <li>
                            Add up 3s by column. For every 3: Several days = 1 More than half the days = 2 Nearly every day = 3
                        </li>
                        <li>
                            Add together column scores to get a TOTAL score.
                        </li>
                        <li>
                            Refer to the accompanying <strong>PHQ-9 Scoring Box</strong> to interpret the TOTAL score
                        </li>
                        <li>
                            Results may be included in patient files to assist you in setting up a treatment goal, determining degree of response, as well as guiding treatment intervention.
                        </li>
                       
                    </ol>
                    
                    <h5 style="color: black;" >Scoring: add up all checked boxes on PHQ-9</h5>
                    <p><strong>For every:</strong> Not at all = 0; Several days = 1;
                        More than half the days = 2; Nearly every day = 3</p>
                        <br>
                        <h5 style="color: black;" >Interpretation of Total Score</h5>
                        
                        <table style="width:40%" class="table table-bordered table-sm ">
                            <thead class="text-center bg-light">
                                <tr>
                                    <th class="col-6">Total Score</th>
                                    <th class="col-6">Depression</th>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                <tr >
                                    <td class="text-center">1-4</td>
                                    <td>Minimal Depression</td>
                                </tr>
                                <tr>
                                    <td class="text-center">5-9</td>
                                    <td>Mild depression</td>
                                </tr>
                                <tr>
                                    <td class="text-center" >10-14</td>
                                    <td >Moderate depression</td>
                                </tr>
                                <tr>
                                    <td class="text-center" >15-19</td>
                                    <td >Moderately severe depression</td>
                                </tr>
                                <tr>
                                    <td class="text-center" >20-27</td>
                                    <td >Severe depression</td>
                                </tr>
                            
                            </tbody>
                        </table>
            </div>
           </div>
           <hr>
           <div class="row mb-3"> 
                <div class="col-6">
                    <label for="" class="form-label">1.Little interest or pleasure in doing things</label>
                </div>
                <div class="col-6">
                    <select name="" id="icfe_PHQ9-Q1_DropDownList" class="form-select">
                        <option disable selected></option>
                        <option value = "0">Not At All</option>
                        <option value = "1">Several days</option>
                        <option value = "2">More than half days</option>
                        <option value = "3">Nearly every day</option>
                    </select>
                </div>
           </div>
           <div class="row mb-3"> 
                <div class="col-6">
                    <label for="" class="form-label">2. Feeling down, depressed, or hopeless</label>
                </div>
                <div class="col-6">
                    <select name="" id="icfe_PHQ9-Q2_DropDownList" class="form-select">
                        <option disable selected></option>
                        <option value = "0">Not At All</option>
                        <option value = "1">Several days</option>
                        <option value = "2">More than half days</option>
                        <option value = "3">Nearly every day</option>
                    </select>
                </div>
            </div>
            <div class="row mb-3"> 
                <div class="col-6">
                    <label for="" class="form-label">3. Trouble falling or staying asleep, or sleeping too much</label>
                </div>
                <div class="col-6">
                    <select name="" id="icfe_PHQ9-Q3_DropDownList" class="form-select">
                        <option disable selected></option>
                        <option value = "0">Not At All</option>
                        <option value = "1">Several days</option>
                        <option value = "2">More than half days</option>
                        <option value = "3">Nearly every day</option>
                    </select>
                </div>
            </div>
            <div class="row mb-3"> 
                <div class="col-6">
                    <label for="" class="form-label">4. Feeling tired or having little energy</label>
                </div>
                <div class="col-6">
                    <select name="" id="icfe_PHQ9-Q4_DropDownList" class="form-select">
                        <option disable selected></option>
                        <option value = "0">Not At All</option>
                        <option value = "1">Several days</option>
                        <option value = "2">More than half days</option>
                        <option value = "3">Nearly every day</option>
                    </select>
                </div>
            </div>
            <div class="row mb-3"> 
                <div class="col-6">
                    <label for="" class="form-label">5. Poor appetite or overeating</label>
                </div>
                <div class="col-6">
                    <select name="" id="icfe_PHQ9-Q5_DropDownList" class="form-select">
                        <option disable selected></option>
                        <option value = "0">Not At All</option>
                        <option value = "1">Several days</option>
                        <option value = "2">More than half days</option>
                        <option value = "3">Nearly every day</option>
                    </select>
                </div>
            </div>
            <div class="row mb-3"> 
                <div class="col-6">
                    <label for="" class="form-label">6. Feeling bad about yourself — or that you are a failure or 
                        have let yourself or your family down</label>
                </div>
                <div class="col-6">
                    <select name="" id="icfe_PHQ9-Q6_DropDownList" class="form-select">
                        <option disable selected></option>
                        <option value = "0">Not At All</option>
                        <option value = "1">Several days</option>
                        <option value = "2">More than half days</option>
                        <option value = "3">Nearly every day</option>
                    </select>
                </div>
            </div>
            <div class="row mb-3"> 
                <div class="col-6">
                    <label for="" class="form-label">7. Trouble concentrating on things, such as reading the 
                        newspaper or watching television</label>
                </div>
                <div class="col-6">
                    <select name="" id="icfe_PHQ9-Q7_DropDownList" class="form-select">
                        <option disable selected></option>
                        <option value = "0">Not At All</option>
                        <option value = "1">Several days</option>
                        <option value = "2">More than half days</option>
                        <option value = "3">Nearly every day</option>
                    </select>
                </div>
            </div>
            <div class="row mb-3"> 
                <div class="col-6">
                    <label for="" class="form-label">8.  Moving or speaking so slowly that other people could have 
                        noticed? Or the opposite — being so fidgety or restless 
                        that you have been moving around a lot more than usual </label>
                </div>
                <div class="col-6">
                    <select name="" id="icfe_PHQ9-Q8_DropDownList" class="form-select">
                        <option disable selected></option>
                        <option value = "0">Not At All</option>
                        <option value = "1">Several days</option>
                        <option value = "2">More than half days</option>
                        <option value = "3">Nearly every day</option>
                    </select>
                </div>
            </div>
            <div class="row mb-3"> 
                <div class="col-6">
                    <label for="" class="form-label">9. Thoughts that you would be better off dead or of hurting 
                        yourself in some way </label>
                </div>
                <div class="col-6">
                    <select name="" id="icfe_PHQ9-Q9_DropDownList" class="form-select">
                        <option disable selected></option>
                        <option value = "0">Not At All</option>
                        <option value = "1">Several days</option>
                        <option value = "2">More than half days</option>
                        <option value = "3">Nearly every day</option>
                    </select>
                    <div class="row">
                        <div class="col mt-2">
                            <p><strong>Screening Score</strong></p>
                        </div>
                    </div>
                </div>
            </div>
            <hr size="4px">
            <div class="row mb-3"> 
                <div class="col-6">
                    <label for="" class="form-label">If you checked off <u>any</u> problems, how <u>difficult</u>
                        have these problems made it for you to do
                        your work, take care of things at home, or get
                        along with other people? </label>
                </div>
                <div class="col-6">
                    <select name="" id="icfe_PHQ9-Q10_DropDownList" class="form-select">
                        <option disable selected></option>
                        <option value = "0">Not difficult At All</option>
                        <option value = "1">Somewhat difficult</option>
                        <option value = "2">Very Difficult</option>
                        <option value = "3">Extremely Difficult</option>
                    </select>
                    <div class="row">
                        <div class="col mt-2">
                            <h5 class="text-danger d-none" id="userMessage">Please answer all questions</h5>
                        </div>  
                         
                    </div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col">
                    <button class="btn btn-danger" id="btnAssessmentDelete">Delete</button>
                    <button class="btn btn-success float-end" id="btnAssessmentComplete">Complete</button>
                    <button class="btn btn-primary mx-2 float-end" id="btnAssessmentEdit">Edit</button>
                    <button class="btn btn-primary mx-2 float-end" id="btnAssessmentCheck">Check</button>
                </div>
            </div>
        
            
       </div>
       </div>
       

    </main>
    <footer class="footer mt-auto py-3 bg-light sticky-footer">
        <div class="container-fluid text-center">
            <span class="text-muted"> &copy; Developed by Drs. Robert L. Spitzer, Janet B.W. Williams, Kurt Kroenke and colleagues, with an educational grant from 
             Pfizer Inc.</span>
        </div>
    </footer>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous">
    </script>
    
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    <script>


        $(document).ready(function(){

            // var inUse = $("AreaInUse").val();

            // if ($("#ichdn_ForCurrentEncounter").val()==0) {
            //     $("#btnAssessmentComplete").addClass("d-none");
            //     $("#btnAssessmentDelete").addClass("d-none");
            //     $("#btnAssessmentEdit").addClass("d-none");
            // }else if ($("#EncounterAssessmentForm  #ichdn_Complete").val().toLowerCase() == 'true') {
            //     $("#btnAssessmentComplete").addClass('d-none');
            //     $("#btnAssessmentDelete").addClass('d-none');

            //     if (IsNullOrEmpty(encounterLocked) && $("#ichdn_ForCurrentEncounter").val() == "1") {
            //         $('#btnAssessmentEdit').removeClass('d-none');
            //     }
            //     disableContent("#EncounterAssessmentForm", ["#btnAssessmentEdit", "#btnAssessmentComplete", "#btnAssessmentDelete"])
            // }

            // if(inUse == "True" || chartAuditor == "True"){
            //     $("#btnAssessmentComplete").addClass("d-none");
            //     $("#btnAssessmentDelete").addClass("d-none");
            //     $("#btnAssessmentEdit").addClass("d-none");
            //     disableContent("#EncounterAssessmentForm",[ "#btnAssessmentEdit", "#btnAssessmentComplete", "#btnAssessmentDelete"] )
            // }

            // $("#btnAssessmentEdit").click(function(){
            //     $("#btnAssessmentComplete").removeClass("d-none");
            //     $("#btnAssessmentDelete").removeClass("d-none");
            //     $("#btnAssessmentEdit").addClass("d-none");
            //     $("#ichdn_Complete").val("false");
            //     $("#ichdn_AssessmentLocked").val("0");
            //     $("#icfe_FinalResult_TextBox").val("");
            //     $("#icfe_AssessmentComplete_Hidden").val(0);
            //     $('#EncounterAssessmentForm  #ichdn_FinalResult').val('');
            //     $(".selectedAssessment a.assessmentLink").text("Partial");
            //     enableContent("#EncounterAssessmentForm");
            // });

        

            // $("#btnAssessmentDelete").click(function(){
                
            //     deleteAssessmentConfirmation();
            // });

            // $("[id^='icfe_']").on('change', function(){
            //     updateAssessmentNarrative();
            // });

            // $("#btnAssessmentComplete").click(function(){
            //     setButtonState('btnAssessmentComplete', '...Processing...', true);
            //     var assessmentResult = calculateResults();
            //     var finalScore = assessmentResult["resultScore"];
            //     var finalResult = assessmentResult["result"];


            //     if (finalScore != -100) {
            //         $("#icfe_FinalResult_CalculatedField").html(finalResult);
            //         $("#icfe_AssessmentComplete_Hidden").val(1);
            //         $('#EncounterAssessmentForm  #ichdn_Complete').val('true');
            //         $('#EncounterAssessmentForm  #ichdn_FinalResult').val(finalResult);
            //         saveResults();
            //     }
            //     else{
            //         setButtonState('btnAssessmentComplete', 'Complete', false);
            //     }
            // });

            $("#btnAssessmentCheck").click(function(){
                var results = calculateResults();
                console.log(results);
                var test = parseInt(document.getElementById("icfe_PHQ9-Q10_DropDownList").value);
                console.log(test);
                
            });

        });

        function saveResults(){
            $.when(saveChartAssessmentsForm()).done(function(){
                setButtonState("btnAssessmentComplete", "Complete", false);
                $("#ichdn_AssessmentLocked").val("1");
                $('#btnAssessmentComplete').addClass('d-none');
                $('#btnAssessmentDelete').addClass('d-none');
                $('#btnAssessmentEdit').removeClass('d-none');
                $(".selectedAssessment a.assessmentLink").text(finalResult);
                disableContent("#EncounterAssessmentForm", ["#btnAssessmentEdit", "#btnAssessmentComplete", "#btnAssessmentDelete"]);
            })
            .fail(function(){
                $("#ichdn_Complete").val("False");
                $('#btnAssessmentComplete').addClass('d-none');
                $('#btnAssessmentDelete').addClass('d-none');
                $('#btnAssessmentEdit').removeClass('d-none');
                
            })
        }

        function calculateResults(){

            var PHQ9Q1 = parseInt(document.querySelector("#icfe_PHQ9-Q1_DropDownList").value);
            var PHQ9Q2 = parseInt(document.querySelector("#icfe_PHQ9-Q2_DropDownList").value);
            var PHQ9Q3 = parseInt(document.querySelector("#icfe_PHQ9-Q3_DropDownList").value);
            var PHQ9Q4 = parseInt(document.querySelector("#icfe_PHQ9-Q4_DropDownList").value);
            var PHQ9Q5 = parseInt(document.querySelector("#icfe_PHQ9-Q5_DropDownList").value);
            var PHQ9Q6 = parseInt(document.querySelector("#icfe_PHQ9-Q6_DropDownList").value);
            var PHQ9Q7 = parseInt(document.querySelector("#icfe_PHQ9-Q7_DropDownList").value);
            var PHQ9Q8 = parseInt(document.querySelector("#icfe_PHQ9-Q8_DropDownList").value);
            var PHQ9Q9 = parseInt(document.querySelector("#icfe_PHQ9-Q9_DropDownList").value);
            var PHQ9Q10 = parseInt(document.querySelector("#icfe_PHQ9-Q10_DropDownList").value);

            var trackingScore = 0;

            if (isNaN(PHQ9Q1)) {PHQ9Q1 = 0} else {trackingScore += 1}
            if (isNaN(PHQ9Q2)) {PHQ9Q2 = 0} else {trackingScore += 1}
            if (isNaN(PHQ9Q3)) {PHQ9Q3 = 0} else {trackingScore += 1}
            if (isNaN(PHQ9Q4)) {PHQ9Q4 = 0} else {trackingScore += 1}
            if (isNaN(PHQ9Q5)) {PHQ9Q5 = 0} else {trackingScore += 1}
            if (isNaN(PHQ9Q6)) {PHQ9Q6 = 0} else {trackingScore += 1}
            if (isNaN(PHQ9Q7)) {PHQ9Q7 = 0} else {trackingScore += 1}
            if (isNaN(PHQ9Q8)) {PHQ9Q8 = 0} else {trackingScore += 1}
            if (isNaN(PHQ9Q9)) {PHQ9Q9 = 0} else {trackingScore += 1}
            if (isNaN(PHQ9Q10)) {PHQ9Q10 = 0} else {trackingScore += 1}

            
            var finalScoreResult = "";
            var finalScore = finalScore = PHQ9Q1 + PHQ9Q2 + PHQ9Q3 + PHQ9Q4 + PHQ9Q5 + PHQ9Q6 + PHQ9Q7 + PHQ9Q8 + PHQ9Q9;;

            if(trackingScore == 10 && finalScore > 0){
                
                if (finalScore >= 1 && finalScore <= 4) {
                    finalScoreResult ="Minimal Depression";
                }
                else if (finalScore >= 5 && finalScore <= 9 ) {
                    finalScoreResult ="Mild Depression";
                }
                else if (finalScore >= 10 && finalScore <= 14 ) {
                    finalScoreResult ="Moderate Depression";
                }
                else if (finalScore >= 15 && finalScore <= 19 ) {
                    finalScoreResult ="Moderately Severe Depression";
                }
                else {
                    finalScoreResult ="Severe Depression";
                }
                return `${finalScoreResult}: Score: ${finalScore}`
            }

            if (trackingScore == 9 && finalScore == 0) {

                finalScoreResult = "No Depression"
                return `${finalScoreResult}`;
            } 
            
            else{
                //return $("#userMessage").removeClass("d-none");
                return alert("Please answer all questions");

            }


        }


    </script>
</body>

</html>